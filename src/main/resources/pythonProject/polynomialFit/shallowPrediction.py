# 输入数据量是输出数据量的十倍

import numpy as np
from scipy.optimize import curve_fit
import sys
import json

# data_x = np.array(
#     [{"data":5.0,"systemTime":"2022-10-21 03:57:58"}, {"data":5.0,"systemTime":"2022-10-21 04:58:04"}, {"data":5.0,"systemTime":"2022-10-21 04:58:39"}, {"data":5.0,"systemTime":"2022-10-21 05:58:04"}, {"data":5.0,"systemTime":"2022-10-21 05:58:40"}, {"data":5.0,"systemTime":"2022-10-21 06:58:16"}, {"data":5.0,"systemTime":"2022-10-21 06:58:20"}, {"data":5.0,"systemTime":"2022-10-21 07:58:04"}, {"data":6.0,"systemTime":"2022-10-21 07:58:37"}, {"data":6.0,"systemTime":"2022-10-21 08:57:55"}, {"data":5.0,"systemTime":"2022-10-21 08:58:27"}, {"data":5.0,"systemTime":"2022-10-21 09:57:57"}, {"data":5.0,"systemTime":"2022-10-21 10:58:01"}, {"data":5.0,"systemTime":"2022-10-21 11:57:58"}, {"data":5.0,"systemTime":"2022-10-21 12:58:15"}, {"data":5.0,"systemTime":"2022-10-21 13:58:37"}, {"data":5.0,"systemTime":"2022-10-21 14:58:16"}, {"data":5.0,"systemTime":"2022-10-21 15:58:14"}, {"data":5.0,"systemTime":"2022-10-21 16:58:10"}, {"data":6.0,"systemTime":"2022-10-21 16:58:16"}, {"data":6.0,"systemTime":"2022-10-21 17:58:20"}, {"data":6.0,"systemTime":"2022-10-21 17:58:24"}, {"data":6.0,"systemTime":"2022-10-21 18:57:53"}, {"data":6.0,"systemTime":"2022-10-21 19:58:04"}, {"data":6.0,"systemTime":"2022-10-21 20:57:55"}, {"data":6.0,"systemTime":"2022-10-21 21:57:53"}, {"data":6.0,"systemTime":"2022-10-21 22:58:05"}, {"data":5.0,"systemTime":"2022-10-21 22:58:38"}, {"data":5.0,"systemTime":"2022-10-21 23:58:08"}, {"data":5.0,"systemTime":"2022-10-21 23:58:14"}, {"data":5.0,"systemTime":"2022-10-22 00:58:01"}, {"data":5.0,"systemTime":"2022-10-22 00:58:36"}, {"data":5.0,"systemTime":"2022-10-22 01:58:26"}, {"data":5.0,"systemTime":"2022-10-22 01:58:29"}, {"data":5.0,"systemTime":"2022-10-22 02:57:58"}, {"data":5.0,"systemTime":"2022-10-22 02:58:32"}, {"data":5.0,"systemTime":"2022-10-22 03:57:58"}, {"data":5.0,"systemTime":"2022-10-22 03:58:32"}, {"data":5.0,"systemTime":"2022-10-22 04:58:15"}, {"data":5.0,"systemTime":"2022-10-22 04:58:24"}, {"data":5.0,"systemTime":"2022-10-22 05:57:52"}, {"data":5.0,"systemTime":"2022-10-22 05:58:29"}, {"data":5.0,"systemTime":"2022-10-22 06:58:21"}, {"data":5.0,"systemTime":"2022-10-22 06:58:24"}, {"data":5.0,"systemTime":"2022-10-22 07:58:11"}, {"data":6.0,"systemTime":"2022-10-22 07:58:19"}, {"data":6.0,"systemTime":"2022-10-22 08:58:28"}, {"data":6.0,"systemTime":"2022-10-22 09:57:56"}, {"data":6.0,"systemTime":"2022-10-22 09:58:32"}, {"data":6.0,"systemTime":"2022-10-22 10:57:50"}, {"data":6.0,"systemTime":"2022-10-22 11:58:04"}, {"data":6.0,"systemTime":"2022-10-22 12:58:00"}, {"data":6.0,"systemTime":"2022-10-22 13:58:12"}, {"data":6.0,"systemTime":"2022-10-22 14:58:07"}, {"data":6.0,"systemTime":"2022-10-22 15:58:06"}, {"data":6.0,"systemTime":"2022-10-22 16:58:17"}, {"data":7.0,"systemTime":"2022-10-22 16:58:20"}, {"data":7.0,"systemTime":"2022-10-22 17:57:50"}, {"data":7.0,"systemTime":"2022-10-22 17:58:30"}, {"data":7.0,"systemTime":"2022-10-22 18:57:50"}, {"data":6.0,"systemTime":"2022-10-22 18:58:24"}, {"data":6.0,"systemTime":"2022-10-22 19:58:00"}, {"data":6.0,"systemTime":"2022-10-22 20:57:57"}, {"data":6.0,"systemTime":"2022-10-22 20:58:29"}, {"data":6.0,"systemTime":"2022-10-22 21:58:14"}, {"data":6.0,"systemTime":"2022-10-22 21:58:17"}, {"data":6.0,"systemTime":"2022-10-22 22:57:54"}, {"data":6.0,"systemTime":"2022-10-22 22:58:27"}, {"data":6.0,"systemTime":"2022-10-22 23:57:49"}, {"data":6.0,"systemTime":"2022-10-22 23:58:31"}, {"data":6.0,"systemTime":"2022-10-23 00:57:54"}, {"data":6.0,"systemTime":"2022-10-23 00:58:32"}, {"data":6.0,"systemTime":"2022-10-23 01:58:11"}, {"data":6.0,"systemTime":"2022-10-23 01:58:18"}, {"data":6.0,"systemTime":"2022-10-23 02:58:01"}, {"data":6.0,"systemTime":"2022-10-23 02:58:41"}, {"data":6.0,"systemTime":"2022-10-23 03:58:00"}, {"data":6.0,"systemTime":"2022-10-23 03:58:33"}, {"data":6.0,"systemTime":"2022-10-23 04:58:06"}, {"data":6.0,"systemTime":"2022-10-23 05:58:19"}, {"data":6.0,"systemTime":"2022-10-23 06:57:59"}, {"data":6.0,"systemTime":"2022-10-23 07:57:58"}, {"data":6.0,"systemTime":"2022-10-23 08:58:03"}, {"data":6.0,"systemTime":"2022-10-23 09:57:58"}, {"data":6.0,"systemTime":"2022-10-23 10:57:52"}, {"data":6.0,"systemTime":"2022-10-23 11:58:03"}, {"data":6.0,"systemTime":"2022-10-23 12:58:21"}, {"data":6.0,"systemTime":"2022-10-23 13:57:53"}, {"data":6.0,"systemTime":"2022-10-23 14:58:03"}, {"data":6.0,"systemTime":"2022-10-23 15:58:12"}, {"data":6.0,"systemTime":"2022-10-23 16:58:08"}, {"data":6.0,"systemTime":"2022-10-23 17:58:12"}, {"data":6.0,"systemTime":"2022-10-23 18:57:53"}, {"data":6.0,"systemTime":"2022-10-23 19:58:02"}, {"data":6.0,"systemTime":"2022-10-23 20:57:46"}, {"data":6.0,"systemTime":"2022-10-23 21:58:00"}, {"data":6.0,"systemTime":"2022-10-23 22:57:45"}, {"data":5.0,"systemTime":"2022-10-23 22:58:22"}, {"data":5.0,"systemTime":"2022-10-23 23:57:56"}, {"data":5.0,"systemTime":"2022-10-24 00:58:00"}, {"data":5.0,"systemTime":"2022-10-24 01:57:54"}, {"data":5.0,"systemTime":"2022-10-24 02:57:52"}, {"data":6.0,"systemTime":"2022-10-24 02:58:26"}, {"data":6.0,"systemTime":"2022-10-24 03:57:57"}, {"data":5.0,"systemTime":"2022-10-24 03:58:29"}, {"data":5.0,"systemTime":"2022-10-24 04:58:16"}, {"data":5.0,"systemTime":"2022-10-24 05:58:21"}, {"data":6.0,"systemTime":"2022-10-24 05:58:27"}, {"data":6.0,"systemTime":"2022-10-24 06:57:55"}, {"data":6.0,"systemTime":"2022-10-24 06:58:29"}, {"data":6.0,"systemTime":"2022-10-24 07:57:51"}, {"data":6.0,"systemTime":"2022-10-24 08:57:48"}, {"data":6.0,"systemTime":"2022-10-24 09:58:00"}, {"data":6.0,"systemTime":"2022-10-24 10:58:13"}, {"data":6.0,"systemTime":"2022-10-24 11:58:04"}, {"data":6.0,"systemTime":"2022-10-24 12:58:09"}, {"data":6.0,"systemTime":"2022-10-24 13:57:54"}, {"data":6.0,"systemTime":"2022-10-24 14:57:49"}, {"data":6.0,"systemTime":"2022-10-24 15:58:08"}, {"data":6.0,"systemTime":"2022-10-24 16:57:46"}, {"data":6.0,"systemTime":"2022-10-24 17:58:05"}, {"data":6.0,"systemTime":"2022-10-24 18:58:14"}, {"data":6.0,"systemTime":"2022-10-24 18:58:20"}, {"data":6.0,"systemTime":"2022-10-24 19:58:14"}, {"data":6.0,"systemTime":"2022-10-24 20:57:54"}, {"data":6.0,"systemTime":"2022-10-24 21:57:44"}, {"data":5.0,"systemTime":"2022-10-24 21:58:18"}, {"data":5.0,"systemTime":"2022-10-24 22:58:08"}, {"data":5.0,"systemTime":"2022-10-24 22:58:12"}, {"data":5.0,"systemTime":"2022-10-24 23:58:11"}, {"data":5.0,"systemTime":"2022-10-24 23:58:13"}, {"data":5.0,"systemTime":"2022-10-25 00:57:57"}, {"data":5.0,"systemTime":"2022-10-25 00:58:30"}, {"data":5.0,"systemTime":"2022-10-25 01:57:56"}, {"data":5.0,"systemTime":"2022-10-25 01:57:59"}, {"data":5.0,"systemTime":"2022-10-25 02:58:02"}, {"data":5.0,"systemTime":"2022-10-25 02:58:05"}, {"data":5.0,"systemTime":"2022-10-25 03:57:46"}, {"data":5.0,"systemTime":"2022-10-25 03:58:23"}, {"data":5.0,"systemTime":"2022-10-25 04:57:58"}, {"data":5.0,"systemTime":"2022-10-25 04:58:46"}, {"data":5.0,"systemTime":"2022-10-25 05:57:59"}, {"data":5.0,"systemTime":"2022-10-25 06:57:52"}, {"data":5.0,"systemTime":"2022-10-25 07:57:59"}, {"data":5.0,"systemTime":"2022-10-25 08:58:04"}, {"data":5.0,"systemTime":"2022-10-25 09:57:52"}, {"data":5.0,"systemTime":"2022-10-25 10:58:05"}, {"data":5.0,"systemTime":"2022-10-25 11:58:00"}, {"data":5.0,"systemTime":"2022-10-25 12:57:46"}, {"data":5.0,"systemTime":"2022-10-25 13:58:00"}, {"data":5.0,"systemTime":"2022-10-25 14:58:00"}, {"data":5.0,"systemTime":"2022-10-25 15:57:45"}, {"data":7.0,"systemTime":"2022-10-25 15:58:20"}, {"data":7.0,"systemTime":"2022-10-25 16:58:03"}, {"data":6.0,"systemTime":"2022-10-25 16:58:10"}, {"data":6.0,"systemTime":"2022-10-25 17:57:49"}, {"data":5.0,"systemTime":"2022-10-25 17:58:24"}, {"data":5.0,"systemTime":"2022-10-25 18:57:48"}, {"data":6.0,"systemTime":"2022-10-25 18:58:21"}, {"data":6.0,"systemTime":"2022-10-25 19:58:01"}, {"data":6.0,"systemTime":"2022-10-25 20:57:57"}, {"data":5.0,"systemTime":"2022-10-25 20:58:03"}, {"data":5.0,"systemTime":"2022-10-25 21:58:11"}, {"data":5.0,"systemTime":"2022-10-25 21:58:13"}, {"data":5.0,"systemTime":"2022-10-25 22:57:51"}, {"data":5.0,"systemTime":"2022-10-25 22:58:24"}, {"data":5.0,"systemTime":"2022-10-25 23:57:56"}, {"data":5.0,"systemTime":"2022-10-25 23:58:05"}, {"data":5.0,"systemTime":"2022-10-26 00:58:09"}, {"data":5.0,"systemTime":"2022-10-26 00:58:13"}, {"data":5.0,"systemTime":"2022-10-26 01:59:14"}, {"data":5.0,"systemTime":"2022-10-26 01:59:49"}, {"data":5.0,"systemTime":"2022-10-26 02:57:53"}, {"data":5.0,"systemTime":"2022-10-26 02:58:30"}, {"data":5.0,"systemTime":"2022-10-26 03:58:10"}, {"data":5.0,"systemTime":"2022-10-26 04:58:12"}, {"data":5.0,"systemTime":"2022-10-26 05:57:38"}, {"data":5.0,"systemTime":"2022-10-26 06:57:41"}, {"data":5.0,"systemTime":"2022-10-26 07:57:58"}, {"data":6.0,"systemTime":"2022-10-26 07:58:02"}, {"data":6.0,"systemTime":"2022-10-26 08:57:38"}, {"data":6.0,"systemTime":"2022-10-26 09:57:42"}, {"data":5.0,"systemTime":"2022-10-26 09:58:16"}, {"data":5.0,"systemTime":"2022-10-26 10:57:45"}, {"data":5.0,"systemTime":"2022-10-26 10:58:27"}, {"data":5.0,"systemTime":"2022-10-26 11:57:42"}, {"data":5.0,"systemTime":"2022-10-26 12:57:50"}, {"data":5.0,"systemTime":"2022-10-26 13:57:43"}, {"data":5.0,"systemTime":"2022-10-26 14:57:48"}, {"data":5.0,"systemTime":"2022-10-26 15:57:30"}, {"data":5.0,"systemTime":"2022-10-26 16:57:40"}, {"data":6.0,"systemTime":"2022-10-26 16:58:12"}, {"data":6.0,"systemTime":"2022-10-26 17:57:57"}, {"data":6.0,"systemTime":"2022-10-26 18:57:58"}, {"data":6.0,"systemTime":"2022-10-26 18:58:02"}, {"data":6.0,"systemTime":"2022-10-26 19:57:40"}, {"data":5.0,"systemTime":"2022-10-26 19:58:14"}, {"data":5.0,"systemTime":"2022-10-26 20:57:44"}, {"data":5.0,"systemTime":"2022-10-26 20:58:23"}, {"data":5.0,"systemTime":"2022-10-26 21:57:32"}, {"data":5.0,"systemTime":"2022-10-26 21:58:06"}, {"data":5.0,"systemTime":"2022-10-26 22:57:37"}, {"data":5.0,"systemTime":"2022-10-26 22:58:11"}, {"data":5.0,"systemTime":"2022-10-26 23:57:46"}, {"data":5.0,"systemTime":"2022-10-26 23:58:18"}, {"data":5.0,"systemTime":"2022-10-27 00:57:54"}, {"data":5.0,"systemTime":"2022-10-27 00:58:28"}, {"data":5.0,"systemTime":"2022-10-27 01:58:00"}, {"data":5.0,"systemTime":"2022-10-27 01:58:03"}, {"data":5.0,"systemTime":"2022-10-27 02:57:44"}, {"data":5.0,"systemTime":"2022-10-27 02:58:19"}, {"data":5.0,"systemTime":"2022-10-27 03:58:04"}, {"data":5.0,"systemTime":"2022-10-27 04:57:58"}, {"data":5.0,"systemTime":"2022-10-27 05:57:45"}, {"data":5.0,"systemTime":"2022-10-27 06:58:00"}, {"data":5.0,"systemTime":"2022-10-27 07:57:59"}, {"data":5.0,"systemTime":"2022-10-27 08:57:46"}, {"data":5.0,"systemTime":"2022-10-27 09:57:53"}, {"data":5.0,"systemTime":"2022-10-27 10:57:40"}, {"data":5.0,"systemTime":"2022-10-27 11:57:47"}, {"data":5.0,"systemTime":"2022-10-27 12:57:51"}, {"data":5.0,"systemTime":"2022-10-27 13:57:46"}, {"data":5.0,"systemTime":"2022-10-27 14:57:56"}, {"data":5.0,"systemTime":"2022-10-27 15:57:32"}, {"data":5.0,"systemTime":"2022-10-27 16:57:44"}, {"data":6.0,"systemTime":"2022-10-27 16:58:18"}, {"data":6.0,"systemTime":"2022-10-27 17:57:52"}, {"data":6.0,"systemTime":"2022-10-27 17:58:02"}, {"data":6.0,"systemTime":"2022-10-27 18:57:37"}, {"data":5.0,"systemTime":"2022-10-27 18:58:10"}, {"data":5.0,"systemTime":"2022-10-27 19:57:40"}, {"data":5.0,"systemTime":"2022-10-27 20:57:39"}, {"data":5.0,"systemTime":"2022-10-27 21:57:47"}, {"data":5.0,"systemTime":"2022-10-27 21:57:51"}, {"data":5.0,"systemTime":"2022-10-28 01:06:49"}, {"data":5.0,"systemTime":"2022-10-28 01:06:53"}, {"data":5.0,"systemTime":"2022-10-28 01:27:29"}, {"data":5.0,"systemTime":"2022-10-28 01:46:24"}, {"data":5.0,"systemTime":"2022-10-28 02:05:41"}, {"data":5.0,"systemTime":"2022-10-28 02:05:44"}, {"data":5.0,"systemTime":"2022-10-28 02:58:20"}, {"data":6.0,"systemTime":"2022-10-28 02:58:23"}, {"data":6.0,"systemTime":"2022-10-28 03:57:49"}, {"data":6.0,"systemTime":"2022-10-28 04:57:59"}, {"data":6.0,"systemTime":"2022-10-28 05:57:39"}, {"data":6.0,"systemTime":"2022-10-28 05:58:14"}, {"data":6.0,"systemTime":"2022-10-28 06:57:46"}, {"data":6.0,"systemTime":"2022-10-28 07:57:49"}, {"data":6.0,"systemTime":"2022-10-28 08:57:58"}, {"data":6.0,"systemTime":"2022-10-28 09:58:06"}, {"data":6.0,"systemTime":"2022-10-28 10:57:53"}, {"data":6.0,"systemTime":"2022-10-28 11:57:48"}, {"data":6.0,"systemTime":"2022-10-28 12:59:46"}, {"data":6.0,"systemTime":"2022-10-28 13:57:36"}, {"data":6.0,"systemTime":"2022-10-28 14:57:51"}, {"data":6.0,"systemTime":"2022-10-28 15:57:57"}, {"data":6.0,"systemTime":"2022-10-28 16:57:53"}, {"data":6.0,"systemTime":"2022-10-28 16:58:35"}, {"data":6.0,"systemTime":"2022-10-28 17:57:36"}, {"data":6.0,"systemTime":"2022-10-28 18:58:12"}, {"data":6.0,"systemTime":"2022-10-28 19:57:45"}, {"data":6.0,"systemTime":"2022-10-28 20:59:31"}, {"data":6.0,"systemTime":"2022-10-28 21:57:54"}, {"data":6.0,"systemTime":"2022-10-28 22:57:53"}, {"data":6.0,"systemTime":"2022-10-28 23:57:51"}, {"data":6.0,"systemTime":"2022-10-29 00:57:50"}, {"data":6.0,"systemTime":"2022-10-29 00:58:25"}, {"data":6.0,"systemTime":"2022-10-29 01:57:51"}, {"data":6.0,"systemTime":"2022-10-29 01:58:41"}, {"data":6.0,"systemTime":"2022-10-29 02:57:49"}, {"data":6.0,"systemTime":"2022-10-29 02:58:01"}, {"data":6.0,"systemTime":"2022-10-29 03:57:55"}, {"data":6.0,"systemTime":"2022-10-29 04:57:58"}, {"data":6.0,"systemTime":"2022-10-29 05:57:31"}, {"data":6.0,"systemTime":"2022-10-29 06:57:46"}, {"data":6.0,"systemTime":"2022-10-29 07:57:55"}, {"data":6.0,"systemTime":"2022-10-29 08:57:42"}, {"data":6.0,"systemTime":"2022-10-29 09:57:32"}, {"data":6.0,"systemTime":"2022-10-29 10:57:57"}, {"data":6.0,"systemTime":"2022-10-29 11:57:40"}, {"data":6.0,"systemTime":"2022-10-29 12:58:03"}, {"data":6.0,"systemTime":"2022-10-29 13:58:03"}, {"data":6.0,"systemTime":"2022-10-29 14:57:37"}, {"data":6.0,"systemTime":"2022-10-29 15:57:58"}, {"data":6.0,"systemTime":"2022-10-29 16:57:37"}, {"data":6.0,"systemTime":"2022-10-29 17:57:40"}, {"data":6.0,"systemTime":"2022-10-29 18:57:53"}, {"data":6.0,"systemTime":"2022-10-29 19:57:59"}, {"data":6.0,"systemTime":"2022-10-29 20:57:47"}, {"data":6.0,"systemTime":"2022-10-29 21:57:40"}, {"data":6.0,"systemTime":"2022-10-29 22:57:39"}, {"data":6.0,"systemTime":"2022-10-29 23:57:33"}, {"data":6.0,"systemTime":"2022-10-30 00:58:45"}, {"data":6.0,"systemTime":"2022-10-30 01:57:56"}, {"data":6.0,"systemTime":"2022-10-30 02:57:32"}, {"data":6.0,"systemTime":"2022-10-30 03:57:41"}, {"data":6.0,"systemTime":"2022-10-30 04:57:33"}, {"data":6.0,"systemTime":"2022-10-30 05:57:46"}, {"data":6.0,"systemTime":"2022-10-30 06:57:31"}, {"data":6.0,"systemTime":"2022-10-30 07:57:50"}, {"data":6.0,"systemTime":"2022-10-30 08:57:54"}, {"data":6.0,"systemTime":"2022-10-30 09:57:49"}, {"data":6.0,"systemTime":"2022-10-30 10:57:45"}, {"data":6.0,"systemTime":"2022-10-30 11:57:51"}, {"data":6.0,"systemTime":"2022-10-30 12:57:52"}, {"data":6.0,"systemTime":"2022-10-30 13:57:38"}, {"data":6.0,"systemTime":"2022-10-30 14:58:05"}, {"data":6.0,"systemTime":"2022-10-30 15:57:58"}, {"data":6.0,"systemTime":"2022-10-30 16:57:27"}, {"data":6.0,"systemTime":"2022-10-30 17:57:56"}, {"data":6.0,"systemTime":"2022-10-30 18:57:44"}, {"data":6.0,"systemTime":"2022-10-30 19:57:45"}, {"data":6.0,"systemTime":"2022-10-30 20:57:32"}, {"data":6.0,"systemTime":"2022-10-30 21:57:51"}, {"data":6.0,"systemTime":"2022-10-30 22:57:25"}, {"data":6.0,"systemTime":"2022-10-30 23:57:34"}, {"data":6.0,"systemTime":"2022-11-07 13:06:12"}, {"data":6.0,"systemTime":"2022-11-07 14:06:34"}, {"data":6.0,"systemTime":"2022-11-07 15:06:22"}, {"data":6.0,"systemTime":"2022-11-07 16:06:24"}, {"data":6.0,"systemTime":"2022-11-07 17:06:14"}, {"data":6.0,"systemTime":"2022-11-07 18:06:12"}, {"data":6.0,"systemTime":"2022-11-07 19:06:09"}, {"data":6.0,"systemTime":"2022-11-07 20:06:30"}, {"data":6.0,"systemTime":"2022-11-07 21:11:43"}, {"data":6.0,"systemTime":"2022-11-07 22:06:10"}, {"data":6.0,"systemTime":"2022-11-07 23:07:06"}]
# )
# # 数据量必须是整天的
# data_x = data_x[-24 * (len(data_x) // 24):]
# # print(data_x.shape)
# x = []
# for (date, value) in data_x:
#     x.append(float(value))
# data_array = np.array(x)
# print(x)
# # x_ = [0]
# # for i in np.arange(1, data_array.shape[0]):
# #     x_.append(data_array[i] - data_array[i - 1])
# # print(x_)
# # data_array = np.array(x_)

data_json_str = sys.argv[-1]  # 获取从 Java 传递过来的 JSON 字符串参数
# 解析 JSON 字符串为 Python 对象
data_array = np.array(json.loads(data_json_str))
ratio = 10
data_array = data_array[-ratio * (len(data_array) // ratio):]
# print(data_array)
data_lens = len(data_array)
predictionData_lens = data_lens // ratio


# 定义多项式函数
def polynomial_func(x, *coeffs):
    y = 0
    for i in range(len(coeffs)):
        y += coeffs[i] * x**i
    return y

# 假设data是您的一维数组，time_series是对应的时间序列
time_series = data_array[:(ratio - 1) * predictionData_lens]
degree = 5
# 使用curve_fit进行多项式拟合
popt, _ = curve_fit(polynomial_func, time_series, data_array[-(ratio - 1) * predictionData_lens:], p0=np.ones(degree)) # 假设使用 degree 次多项式拟合

# 预测未来2个小时的数据走势
future_time_series = data_array[-(ratio - 1) * predictionData_lens:]
predictions = polynomial_func(future_time_series, *popt)[-predictionData_lens:]
predictions_list = []
for prediction in predictions:
    predictions_list.append(float("{:.4f}".format(prediction)))
# list 才能被封装成 json 传输
print(json.dumps(predictions_list))
